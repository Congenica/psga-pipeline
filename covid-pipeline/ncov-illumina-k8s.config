// this config tells ncov how to run the illumina workflow
// and it is used by the ncov2019_artic_nf_illumina pod that spins up ncov nextflow pipeline sub pods

includeConfig 'executor.config'

process {
    executor = 'k8s'

    withName:readTrimming {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:articDownloadScheme {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:indexReference {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:writeQCSummaryCSV {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:readMapping {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:trimPrimerSequences {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:makeConsensus {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:callVariants {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:makeQCCSV {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
    withName:collateSamples {
        container = "${env.DOCKER_IMAGE_PREFIX}/ncov2019_artic_nf_illumina:${env.DOCKER_IMAGE_TAG}"
    }
}
