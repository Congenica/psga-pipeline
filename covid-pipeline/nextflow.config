manifest {
    description = 'COVID pipeline'
    nextflowVersion = '>= 20.10.0'
}

env {
    COVID_PIPELINE_WORKDIR = "${HOME}/covid-pipeline"
    GENOME_FASTA_PATH = "${env.COVID_PIPELINE_WORKDIR}/reheadered-fasta"
}

params {
    /* parameters for ncov2019_artic_nf process docker image is passed as
     * a parameter as this process is an actual nextflow execution
     */
    ncov_pipeline_dir = "${HOME}/ps-bahrain-covid/ncov2019-artic-nf"
    ncov_docker_image = "ncov2019_artic_nf:1.0.0"
    ncov_prefix = "covid_test"
    ncov_fastq_sample_dir = "${HOME}/Bahrain_COVID_s3_data_lite/sample_data"

}


process {
    withName:reheader_genome_fasta {
        container = '144563655722.dkr.ecr.eu-west-1.amazonaws.com/congenica/dev/covid-pipeline:1.0.0'
    }
    withName:pangolin_pipeline {
        container = 'pangolin:1.0.0'
    }
}
docker {
    enabled = true
    fixOwnership = true
    runOptions = "-u \$(id -u):\$(id -g)"
}
