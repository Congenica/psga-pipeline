// this config tells ncov how to run the nanopore workflow
// and it is used by the ncov2019-artic-nf-nanopore pod that spins up ncov nextflow pipeline sub pods

includeConfig 'executor.config'

process {
    // default directives. These can be fine-tuned per process
    executor = 'local'
    cpus = "${env.K8S_PROCESS_CPU_LOW}"
    memory = { "${env.K8S_PROCESS_MEMORY_LOW}" as int * 1.MB * task.attempt }

    withName:articGuppyPlex {
        memory = { "${env.K8S_PROCESS_MEMORY_HIGH}" as int * 1.MB * task.attempt }
    }
    withName:articMinIONMedaka {
        memory = { "${env.K8S_PROCESS_MEMORY_VERY_HIGH}" as int * 1.MB * task.attempt }
    }
    withName:articRemoveUnmappedReads {
        memory = { "${env.K8S_PROCESS_MEMORY_HIGH}" as int * 1.MB * task.attempt }
    }
    withName:makeQCCSV {
        memory = { "${env.K8S_PROCESS_MEMORY_HIGH}" as int * 1.MB * task.attempt }
    }
    withName:collateSamples {
        memory = { "${env.K8S_PROCESS_MEMORY_HIGH}" as int * 1.MB * task.attempt }
    }
}
